.\" Man page generated from reStructeredText.
.
.TH MAKEFLOW 1 "2011-09-05" "3.4.0" "cooperative computing tools"
.SH NAME
makeflow \- Workflow engine for executing distributed workflows
.
.nr rst2man-indent-level 0
.
.de1 rstReportMargin
\\$1 \\n[an-margin]
level \\n[rst2man-indent-level]
level margin: \\n[rst2man-indent\\n[rst2man-indent-level]]
-
\\n[rst2man-indent0]
\\n[rst2man-indent1]
\\n[rst2man-indent2]
..
.de1 INDENT
.\" .rstReportMargin pre:
. RS \\$1
. nr rst2man-indent\\n[rst2man-indent-level] \\n[an-margin]
. nr rst2man-indent-level +1
.\" .rstReportMargin post:
..
.de UNINDENT
. RE
.\" indent \\n[an-margin]
.\" old: \\n[rst2man-indent\\n[rst2man-indent-level]]
.nr rst2man-indent-level -1
.\" new: \\n[rst2man-indent\\n[rst2man-indent-level]]
.in \\n[rst2man-indent\\n[rst2man-indent-level]]u
..
.SH SYNOPSIS
.INDENT 0.0
.INDENT 3.5
.sp
makeflow [options] <dagfile>
.UNINDENT
.UNINDENT
.SH DESCRIPTION
.sp
\fBMakeflow\fP is a workflow engine for distributed computing. It accepts a
specification of a large amount of work to be performed, and runs it on remote
machines in parallel where possible. In addition, \fBMakeflow\fP is
fault\-tolerant, so you can use it to coordinate very large tasks that may run
for days or weeks in the face of failures. \fBMakeflow\fP is designed to be
similar to Make, so if you can write a Makefile, then you can write a
\fBMakeflow\fP.
.sp
You can run a \fBMakeflow\fP on your local machine to test it out. If you have a
multi\-core machine, then you can run multiple tasks simultaneously. If you have
a Condor pool or a Sun Grid Engine batch system, then you can send your jobs
there to run. If you don\(aqt already have a batch system, \fBMakeflow\fP comes with
a system called WorkQueue that will let you distribute the load across any
collection of machines, large or small.
.SH OPTIONS
.sp
When \fBmakeflow\fP is ran without arguments, it will attempt to execute the
workflow specified by the \fBMakeflow\fP dagfile using the \fBlocal\fP execution
engine.
.SS Commands
.INDENT 0.0
.INDENT 3.5
.INDENT 0.0
.TP
.B \-c
.
Clean up: remove logfile and all targets.
.TP
.B \-D
.
Display the Makefile as a Dot graph.
.TP
.B \-k
.
Syntax check.
.TP
.B \-h
.
Show this help screen.
.TP
.B \-I
.
Show input files.
.TP
.B \-O
.
Show output files.
.TP
.B \-v
.
Show version string.
.UNINDENT
.UNINDENT
.UNINDENT
.SS Batch Options
.INDENT 0.0
.INDENT 3.5
.INDENT 0.0
.TP
.BI \-j \ <#>
.
Max number of local jobs to run at once. (default is # of cores)
.TP
.BI \-J \ <#>
.
Max number of remote jobs to run at once. (default is 100)
.TP
.BI \-L \ <logfile>
.
Use this file for the batch system log. (default is X.<type>log)
.TP
.BI \-l \ <logfile>
.
Use this file for the makeflow log. (default is X.makeflowlog)
.TP
.BI \-B \ <options>
.
Add these options to all batch submit files.
.TP
.BI \-r \ <n>
.
Automatically retry failed batch jobs up to n times.
.TP
.BI \-S \ <timeout>
.
Time to retry failed batch job submission. (default is 3600s)
.TP
.BI \-T \ <type>
.
Batch system type: local, condor, sge, moab, wq, hadoop, mpi\-queue. (default is local)
.UNINDENT
.UNINDENT
.UNINDENT
.SS Debugging Options
.INDENT 0.0
.INDENT 3.5
.INDENT 0.0
.TP
.BI \-d \ <subsystem>
.
Enable debugging for this subsystem.
.TP
.BI \-o \ <file>
.
Send debugging to this file.
.UNINDENT
.UNINDENT
.UNINDENT
.SS WorkQueue Options
.INDENT 0.0
.INDENT 3.5
.INDENT 0.0
.TP
.B \-a
.
Advertise the master information to a catalog server.
.TP
.BI \-C \ <catalog>
.
Set catalog server to <catalog>. Format: HOSTNAME:PORT
.TP
.B \-e
.
Set the WorkQueue master to only accept workers that have the same \-N <project> option.
.TP
.BI \-F \ <#>
.
WorkQueue fast abort multiplier. (default is deactivated)
.TP
.BI \-N \ <project>
.
Set the project name to <project>.
.TP
.BI \-P \ <integer>
.
Priority. Higher the value, higher the priority.
.TP
.BI \-p \ <port>
.
Port number to use with WorkQueue . (default is 9123, \-1=random)
.TP
.BI \-w \ <mode>
.
Auto WorkQueue mode. Mode is either \(aqwidth\(aq or \(aqgroup\(aq (DAG [width] or largest [group] of tasks).
.TP
.BI \-W \ <mode>
.
WorkQueue scheduling algorithm. (time|files|fcfs)
.UNINDENT
.UNINDENT
.UNINDENT
.SS Other Options
.INDENT 0.0
.INDENT 3.5
.INDENT 0.0
.TP
.B \-A
.
Disable the check for AFS. (experts only)
.TP
.B \-K
.
Preserve (i.e., do not clean) intermediate symbolic links.
.TP
.B \-z
.
Force failure on zero\-length output files.
.UNINDENT
.UNINDENT
.UNINDENT
.SH ENVIRONMENT VARIABLES
.sp
The following environment variables will affect the execution of your
\fBMakeflow\fP:
.INDENT 0.0
.TP
.B BATCH_OPTIONS
.
This corresponds to the \fB\-B <options>\fP parameter and will pass extra
batch options to the underlying execution engine.
.TP
.B MAKEFLOW_MAX_LOCAL_JOBS
.
This corresponds to the \fB\-j <#>\fP parameter and will set the maximum
number of local batch jobs.  If a \fB\-j <#>\fP parameter is specified, the
minimum of the argument and the environment variable is used.
.TP
.B MAKEFLOW_MAX_REMOTE_JOBS
.
This corresponds to the \fB\-J <#>\fP parameter and will set the maximum
number of local batch jobs.  If a \fB\-J <#>\fP parameter is specified, the
minimum of the argument and the environment variable is used.
.UNINDENT
.sp
Note that variables defined in your \fBMakeflow\fP are exported to the
environment.
.SH EXAMPLES
.sp
.nf
.ft C
# Run makeflow locally with debugging
$ makeflow \-d all Makeflow

# Run makeflow on Condor will special requirements
$ makeflow \-T condor \-B "requirements = MachineGroup == \(aqccl\(aq" Makeflow

# Run makeflow with WorkQueue using named workers
$ makeflow \-T wq \-a \-N project.name Makeflow
.ft P
.fi
.SH SEE ALSO
.INDENT 0.0
.IP \(bu 2
.
\fI\%Makeflow User\(aqs Manual\fP
.UNINDENT
.SH AUTHOR
Cooperative Computing Lab. http://cse.nd.edu/~ccl.
.SH COPYRIGHT
GPLv2
.\" Generated by docutils manpage writer.
.\" 
.
